/* ─── Atmospheric Breathing Background ────────────────────────────────
 *  Sunrise-over-ocean gradient with a slow, seamless breathing cycle.
 *  The outer element must NEVER be unmounted during verse changes.
 * ─────────────────────────────────────────────────────────────────── */

.soak-breathe {
  position: fixed;
  top: -10dvh;
  left: -10vw;
  right: -10vw;
  bottom: -10dvh;
  height: 120dvh;
  width: 120vw;
  z-index: 50;
  min-height: -webkit-fill-available;
  /* Force hardware acceleration and independent layer */
  transform: translate3d(0,0,0);
  backface-visibility: hidden;
  perspective: 1000px;
  pointer-events: none;
  background: #1e1b3a; /* Base dark color */
  will-change: transform;
  -webkit-transform: translate3d(0,0,0);
  -webkit-backface-visibility: hidden;
}

/* Layer 1: Sky Gradient (Static) */
.soak-breathe::before {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, #1e1b3a 0%, #3d3566 35%, #7b6b96 70%, #b09aaf 100%);
  opacity: 1;
  animation: soak-bg-pulse 15s ease-in-out infinite alternate;
  will-change: opacity;
  transform: translate3d(0,0,0);
  -webkit-transform: translate3d(0,0,0);
}

/* Layer 2: Horizon/Water Glow (Static) */
.soak-breathe::after {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse 80% 50% at 50% 60%, rgba(255, 210, 150, 0.25) 0%, rgba(240, 180, 120, 0.1) 45%, transparent 80%);
  opacity: 0.4;
  animation: soak-glow-pulse 10s ease-in-out infinite alternate;
  will-change: opacity, transform;
  transform: translate3d(0,0,0);
  -webkit-transform: translate3d(0,0,0);
}

@keyframes soak-bg-pulse {
  0% { opacity: 0.6; }
  100% { opacity: 1; }
}

@keyframes soak-glow-pulse {
  0% { opacity: 0.3; transform: scale(0.95) translate3d(0,0,0); }
  100% { opacity: 0.8; transform: scale(1.05) translate3d(0,0,0); }
}

/* ─── Text breathing — gentle opacity pulse (Compositor-friendly) ─── */

@keyframes soak-text-breathe {
  0%, 100% { opacity: 1; transform: translate3d(0,0,0) translateZ(0); }
  50% { opacity: 0.45; transform: translate3d(0,0,0) translateZ(0); }
}

.soak-verse {
  transition: opacity 800ms ease-in-out;
  will-change: opacity;
  transform: translate3d(0, 0, 0) translateZ(0);
}

.soak-breathe-text {
  animation: soak-text-breathe 6s ease-in-out infinite;
  transform: translate3d(0, 0, 0) translateZ(0);
  will-change: opacity;
}

/* ─── Text Style (no animation — purely visual) ───────────────────── */

.soak-text {
  font-size: 28px;
  line-height: 1.85;
  font-weight: 700;
  color: rgba(255, 252, 240, 0.6); /* Reduced base opacity to allow highlights to stand out */
  text-align: center;
  letter-spacing: 0.01em;
}

/* ─── Word Tokens ─────────────────────────────────────────────────── */

.soak-word {
  cursor: default;
  border-radius: 4px;
  transition: text-shadow 400ms ease, color 400ms ease;
  /* Prevent iOS long-press callout */
  -webkit-touch-callout: none;
}

.soak-word-highlighted {
  color: #ffffff;
  font-weight: 900;
  text-shadow:
    0 0 15px rgba(255, 255, 255, 0.9),
    0 0 30px rgba(255, 255, 255, 0.6),
    0 0 45px rgba(255, 220, 160, 0.3);
}

/* ─── Reduced Motion ──────────────────────────────────────────────── */

@media (prefers-reduced-motion: reduce) {
  .soak-breathe {
    animation: none;
    background-size: 100% 160%;
    background-position: 50% 18%;
  }

  .soak-breathe::before {
    animation: none;
    opacity: 0.6;
  }

  .soak-breathe::after {
    animation: none;
    opacity: 0.6;
  }

  .soak-word {
    transition: none;
  }

  .soak-verse {
    transition: none;
  }

  .soak-text {
    animation: none;
  }
}

